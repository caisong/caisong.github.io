<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ipv6 on Caisong's Blog</title><link>https://caisong.github.io/tags/ipv6/</link><description>Recent content in Ipv6 on Caisong's Blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 03 Sep 2021 21:42:16 +0800</lastBuildDate><atom:link href="https://caisong.github.io/tags/ipv6/index.xml" rel="self" type="application/rss+xml"/><item><title>Ipv6 connect</title><link>https://caisong.github.io/posts/ipv6connect/</link><pubDate>Fri, 03 Sep 2021 21:42:16 +0800</pubDate><guid>https://caisong.github.io/posts/ipv6connect/</guid><description>&lt;h2 id="ipv6-connect">ipv6 connect&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/*connect(7, {sa_family=AF_INET6, sin6_port=htons(80), inet_pton(AF_INET6,
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> &amp;#34;fe80::21f:16ff:fe1a:f5b8&amp;#34;, &amp;amp;sin6_addr), sin6_flowinfo=0, sin6_scope_id=0},28)*/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in6 sin6;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . . .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_family &lt;span style="color:#f92672">=&lt;/span> AF_INET6;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_flowinfo &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_port &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">htons&lt;/span>(&lt;span style="color:#ae81ff">23&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sin6.sin6_addr &lt;span style="color:#f92672">=&lt;/span> in6addr_loopback; &lt;span style="color:#75715e">/* structure assignment */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> . . .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">connect&lt;/span>(s, (&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr &lt;span style="color:#f92672">*&lt;/span>) &lt;span style="color:#f92672">&amp;amp;&lt;/span>sin6, &lt;span style="color:#66d9ef">sizeof&lt;/span>(sin6)) &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="获取网卡信息">获取网卡信息&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">struct&lt;/span> ifreq ifr;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>iface &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;eth0&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">unsigned&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>mac;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>fd &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">socket&lt;/span>(AF_INET, SOCK_DGRAM, &lt;span style="color:#ae81ff">0&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ifr.ifr_addr.sa_family &lt;span style="color:#f92672">=&lt;/span> AF_INET;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">strncpy&lt;/span>(ifr.ifr_name , iface , IFNAMSIZ&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">ioctl&lt;/span>(fd, SIOCGIFHWADDR, &lt;span style="color:#f92672">&amp;amp;&lt;/span>ifr);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (AF_INET6 &lt;span style="color:#f92672">==&lt;/span> remote_addrinfo&lt;span style="color:#f92672">-&amp;gt;&lt;/span>ai_family) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ((&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in6 &lt;span style="color:#f92672">*&lt;/span>)remote_addrinfo&lt;span style="color:#f92672">-&amp;gt;&lt;/span>ai_addr)&lt;span style="color:#f92672">-&amp;gt;&lt;/span>sin6_scope_id &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>if_nametoindex
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Ipv6地址设定</title><link>https://caisong.github.io/posts/ipv6%E5%9C%B0%E5%9D%80%E8%AE%BE%E5%AE%9A/</link><pubDate>Fri, 03 Sep 2021 21:41:59 +0800</pubDate><guid>https://caisong.github.io/posts/ipv6%E5%9C%B0%E5%9D%80%E8%AE%BE%E5%AE%9A/</guid><description>&lt;p>Cut out summary from your post content here.&lt;/p></description></item></channel></rss>